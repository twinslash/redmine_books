// update rate on form
$('#rate_<%= @rate.id %>').remove();
$('#new_rate').after("<%= escape_javascript(render 'rates/rate', :rate => @rate) %>");

// update average rating
$('div.book-header span').html("<%= escape_javascript(ratings_for @book, :static) %>");

// clear error messages on form
$('#new_rate #errorExplanation').remove();
// hide form
$('#new_rate').hide();

// update form links
$('#cancel_rate').attr('onclick', "cancelRate(<%= @rate.id %>);return false;");

// update estimate link
$('a.icon.icon-book-estimate').attr('onclick', "showFormForRate(<%= @rate.id %>);return false;")
