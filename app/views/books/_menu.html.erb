<% on_index ||= false %>
<% opts = {}; opts = { remote: true } if params[:action] == "index" || on_index %>
<% if User.current.allowed_books_to? "take_book", book %>
  <%= link_to l('user_books_action_take_book'), take_book_path(book), { class: 'icon icon-take-book' }.merge(opts) %>
<% end %>
<% if User.current.allowed_books_to? "return_book", book %>
  <%= link_to l('user_books_action_return_book'), give_book_path(book), { class: 'icon icon-return-book' }.merge(opts) %>
<% end %>
<% if User.current.allowed_books_to? "edit_book", book %>
  <%= link_to l('user_books_action_edit_book'), edit_book_path(book), { class: 'icon icon-edit' } %>
<% end %>
<% if User.current.allowed_books_to? "delete_book", book %>
  <%= link_to l('user_books_action_delete_book'), book_path(book), { class: 'icon icon-del', method: :delete, data: {confirm: l(:text_are_you_sure) } }.merge(opts) %>
<% end %>
